multibranchPipelineJob('CodeValidation-voter') {
    branchSources {
        github {
            id('1f6f9ade-1bad-45fe-8712-16899206cb21')
            apiUri('https://github.wdf.sap.corp/api/v3/')
            repoOwner('DevX')
            repository('CodeValidation')
            includes('*')
            excludes('master')
            scanCredentialsId('GitHub_User')
            buildOriginBranch true
            buildOriginBranchWithPR true
            buildOriginPRMerge false
            buildOriginPRHead false
            buildForkPRMerge true
            buildForkPRHead false
        }
    }

    configure { project ->
        project / 'factory'  {
            scriptPath 'Jenkinsfile_Voter'
        }
    }

    orphanedItemStrategy {
        discardOldItems {
            numToKeep(50)
        }
    }
}
